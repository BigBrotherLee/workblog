<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.sunshareteam.workblog.dao.UserMapper">
	
	<select id="findUserById" resultType="com.sunshareteam.workblog.entity.User">
		select userid,username,password,phone,email,pic,autograph from tb_user where userid=#{userid}
	</select>
	
	<select id="findRoleByUserId" resultType="com.sunshareteam.workblog.entity.Role">
		select r.*  from tb_role r ,tb_user_role ur, user u  where ur.roleid=r.roleid and ur.userid=u.userid and u.userid=#{userid}
	</select>
	
	<select id="findPromissionByUserId" resultType="com.sunshareteam.workblog.entity.Permission">
		select p.* from tb_user_role ur, tb_user u ,tb_permission p , tb_role_permission rp where rp.roleid=ur.roleid and rp.permissionid=p.permissionid and ur.userid=u.userid and u.userid=#{userid}
	</select>
	
	<insert id="addUser" parameterType="com.sunshareteam.workblog.entity.User">
		
	</insert>
</mapper>  