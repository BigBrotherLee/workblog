<!DOCTYPE html>
<html lang="en">
	<head>
		<title>浅行博客分类</title>
		<!-- custom-theme -->
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
		<meta name="keywords" content="" />
		<!-- //custom-theme -->
		<link href="../static/css/bootstrap.min.css" rel="stylesheet" type="text/css" media="all" />
		<link href="css/style.css" rel="stylesheet" type="text/css" media="all" />
		<link rel="stylesheet" href="css/flexslider.css" type="text/css" media="screen" property="" />
		<!-- js -->
		<script type="text/javascript" src="js/jquery-2.1.4.min.js"></script>
		<script type="text/javascript" src="js/jquery.wmuSlider.js"></script><!-- //js -->
		<!-- font-awesome-icons -->
		<link href="../admin/vendor/font-awesome/css/font-awesome.css" rel="stylesheet">
		<!-- //font-awesome-icons -->
		<link href="css/stylelht.css" rel="stylesheet" type="text/css" media="all" />

		<link href="http://fonts.googleapis.com/css?family=Shadows+Into+Light+Two&amp;subset=latin-ext" rel="stylesheet">
		<link href="http://fonts.googleapis.com/css?family=Cinzel" rel="stylesheet">
		<script type="text/javascript" src="../static/js/vue.js"></script>
		<script type="text/javascript" src="../static/js/vue-resource.min.js"></script>
	</head>

	<body>
	<div id="app">
		<!-- banner -->
		<div class="banner1">
			<div class="container navdiv">
				<nav class="navbar navbar-default">
					<div class="navbar-header navbar-left">
						<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
							<span class="sr-only">Toggle navigation</span>
							<span class="icon-bar"></span>
							<span class="icon-bar"></span>
							<span class="icon-bar"></span>
						</button>
						<h1><a class="navbar-brand" href="services.html">WORK <span>BLOG </span></a></h1>
					</div>
					<!-- Collect the nav links, forms, and other content for toggling -->
					<div class="collapse navbar-collapse navbar-right" id="bs-example-navbar-collapse-1">
						<nav>
							<ul class="nav navbar-nav link-effect-14" id="link-effect-14">
								<li><a href="services.html"><span>首页</span></a></li>
								<li class="active"><a href="gallery.html"><span>分类</span></a></li>
								<li><a href="friend.html"><span>友链</span></a></li>
								<li><a href="about.html"><span>关于</span></a></li>
							</ul>
							<div class="agileinfo_social_icons">
								<ul class="agileits_social_list">
									<li>
										<input type="text" class="form-control" placeholder="搜索..." id="searchtext">
									</li>
									<li><span class="input-group-btn1">
											<button class="btn btn-default btn2" type="button"v-on:click="search">搜索</button>
										</span>
									</li>
									<li v-show="!role"><a href="login.html" class="w3_agile_facebook"><i class="fa fa-user-o" aria-hidden="true">登录</i></a></li>
									<li v-show="!role"><a href="register.html" class="agile_twitter"><i class="fa fa-sign-in" aria-hidden="true">注册</i></a></li>
									<li v-show="role"><a href="../admin/index.html" class="w3_agile_facebook"><i class="fa fa-user-o" aria-hidden="true">{{user.username}}</i></a></li>
									<li v-show="role"><a href="/workblog/user/logout" class="agile_twitter"><i class="fa fa-sign-in" aria-hidden="true">退出</i></a></li>
								</ul>
							</div>
						</nav>
					</div>
				</nav>
			</div>
		</div>

		<!-- //banner -->
		<!-- gallery -->

		<div class="zuida container-fluid">
			<div class="banxin row">
				<div class="tupian fl col-lg-4 col-md-4 visible-lg-block"></div>
				<div class="fenglei fr col-lg-8 col-md-8">
					<div v-for="item in categotylist" :key="item.categotyid" class="g1 row">
						<a :href="'gallerydetail.html?categotyid='+item.categotyid">
						<div class="post fl col-md-6">
							<div class="post-title">{{item.categotytitle}}</div>
							<div class="post-info ">
								<small>{{item.categotydetail}}</small>
								<br>
								<!-- <small>1个月前更新
									, 1个月前发布
								</small> -->

							</div>
						</div>
						<div class="post-tupian fr col-md-6">
							<img class="img-responsive" :src="item.img">
						</div>
						</a>
					</div>
					
				</div>
			</div>
		</div>
		</div>
		<!-- //gallery -->
		<!-- footer -->
		<div class="copy-right-grids ">
			<div>
				<div class="copy-left">
					<p class="footer-gd">Copyright &copy; 2019.5 软件工程1601班 第二小组 李园祥 周金勇 戴同吉 钟珊珊 刘华涛 王小杰 浅行博客 模板来自 <a href="http://www.cssmoban.com/"
						 target="_blank" title="模板之家">模板之家</a><a href="http://www.cssmoban.com/" title="网页模板" target="_blank">网页模板</a></p>
				</div>
				<div class="clearfix"></div>
			</div>
		</div>

		<!-- //footer-->
		<!-- bootstrap-pop-up -->
		<!-- //bootstrap-pop-up -->
		<!-- flexSlider -->
		<script defer src="js/jquery.flexslider.js"></script>
		<script type="text/javascript">
			$(window).load(function() {
				$('.flexslider').flexslider({
					animation: "slide",
					start: function(slider) {
						$('body').removeClass('loading');
					}
				});
			});
		</script>
		<!-- //flexSlider -->
		<!-- for bootstrap working -->
		<script src="../static/js/bootstrap.min.js"></script>
		<!-- //for bootstrap working -->
		<!-- start-smoth-scrolling -->
		<script type="text/javascript" src="js/move-top.js"></script>
		<script type="text/javascript" src="js/easing.js"></script>
		<!-- 滚回顶部 -->
		<script type="text/javascript">
			jQuery(document).ready(function($) {
				$(".scroll").click(function(event) {
					event.preventDefault();
					$('html,body').animate({
						scrollTop: $(this.hash).offset().top
					}, 1000);
				});
			});
		</script>
			<script type="text/javascript">
				var vm1 = new Vue({
					el: '#app',
					data: {
						username:'',
						role: '',
						user:{},
						categotylist: [],
					},
					created() {
						this.chooserole();
						this.getAll();
					},
					methods: {
							search(){
								var key=$.trim(document.getElementById("searchtext").value);
								if(key=="" || key.length>10){
									return false;
								}
								window.location.href="searchresult.html?key="+key;			
							},
						chooserole() {
							//判断用户的角色	
							this.$http.get('/workblog/user/getme').then(result => {
								var result = result.body;
								if(typeof result.user !=="undefined"){
									this.user = result.user;
									this.role = true;	
								}
							});
						},
						getAll() {
							//判断用户的角色	
							this.$http.get('/workblog/categoty/getall?index=1&length=9').then(result => {
								var result = result.body;
								this.categotylist=result.data;
								
							});
						},
						
						changeActive(a) {
							var myInfoActive = $("#myInfoActive");
							//					alert(myInfoActive)
							var changeImgActive = $("#changeImgActive");
							var myInfo = $("#myInfo"); //基本资料内容
							var changeImg = $("#changeImg"); //内容
							//					var a = $("#myInfoActive").hasClass('active');//切换功能
							if (a) {
								//显示修改头像
								myInfoActive.removeClass('active'); //基本资料
								changeImgActive.addClass('active');
								myInfo.removeClass('active');
								changeImg.addClass('active');
		
							} else {
								//显示基本资料
								myInfoActive.addClass('active');
								changeImgActive.removeClass('active'); //基本资料
								myInfo.addClass('active');
								changeImg.removeClass('active');
							}
		
						},
						getUserList() { /*http://localhost:8080/WMPX/user/showIndustry*/
							var t = this.getCookie("token");
							this.$http.get('/wmpx/user/token/' + t).then(result => {
								var result = result.body;
								if (result.status === 200) {
									this.list1 = result.data;
									console.log(this.list1);
								} else {
									alert("数据连接失败");
								}
							});
						},
						getRequest() {
							var url = location.search; //获取url中"?"符后的字串
							var theRequest = new Object();
							if (url.indexOf("?") != -1) {
								var strs = url.substr(1);
								this.id = strs.split("=")[1];
							}
							return theRequest;
						},
					}
				});
			</script>
		
		
	</body>
</html>
