<!DOCTYPE html>
<html lang="en">
<head>
<title>浅行博客分类详情</title>
<!-- custom-theme -->
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="keywords" content="" />
<script type="application/x-javascript">
	
	
			addEventListener("load", function() {
				setTimeout(hideURLbar, 0);
			}, false);

			function hideURLbar() {
				window.scrollTo(0, 1);
			}
		

</script>
<!-- //custom-theme -->
<link href="../static/css/bootstrap.min.css" rel="stylesheet"
	type="text/css" media="all" />
<link href="css/style.css" rel="stylesheet" type="text/css" media="all" />
<link rel="stylesheet" href="css/flexslider.css" type="text/css"
	media="screen" property="" />
<!-- js -->
<script type="text/javascript" src="js/jquery-2.1.4.min.js"></script>
<script type="text/javascript" src="js/jquery.wmuSlider.js"></script>
<!-- //js -->
<!-- font-awesome-icons -->
<link href="../admin/vendor/font-awesome/css/font-awesome.css"
	rel="stylesheet">
<!-- //font-awesome-icons -->
<link href="css/stylelht.css" rel="stylesheet" type="text/css"
	media="all" />

<link href="http://fonts.googleapis.com/css?family=Shadows+Into+Light+Two&amp;subset=latin-ext" rel="stylesheet">
<link href="http://fonts.googleapis.com/css?family=Cinzel" rel="stylesheet">
<script type="text/javascript" src="../static/js/vue.js"></script>
<script type="text/javascript" src="../static/js/vue-resource.min.js"></script>
<style type="text/css">
	.article-summary{
		overflow: hidden;
		display: -webkit-box;
		-webkit-line-clamp: 2;
		-webkit-box-orient: vertical;
	}
</style>
</head>

<body>
	<!-- banner -->
	<div id="app">
		<div class="banner1">
			<div class="container navdiv">
				<nav class="navbar navbar-default">
					<div class="navbar-header navbar-left">
						<button type="button" class="navbar-toggle collapsed"
							data-toggle="collapse"
							data-target="#bs-example-navbar-collapse-1">
							<span class="sr-only">Toggle navigation</span> <span
								class="icon-bar"></span> <span class="icon-bar"></span> <span
								class="icon-bar"></span>
						</button>
						<h1>
							<a class="navbar-brand" href="/workblog/html/user/services.html">WORK
								<span>BLOG </span>
							</a>
						</h1>
					</div>
					<!-- Collect the nav links, forms, and other content for toggling -->
					<div class="collapse navbar-collapse navbar-right"
						id="bs-example-navbar-collapse-1">
						<nav>
							<ul class="nav navbar-nav link-effect-14" id="link-effect-14">
								<li><a href="services.html"><span>首页</span></a></li>
								<li><a href="gallery.html"><span>分类</span></a></li>
								<li><a href="friend.html"><span>友链</span></a></li>
								<li><a href="about.html"><span>关于</span></a>
							</ul>
							<div class="agileinfo_social_icons">
								<ul class="agileits_social_list">
									<li><input type="text" class="form-control"
										placeholder="搜索..." id="searchtext"></li>
									<li><span class="input-group-btn1">
											<button class="btn btn-default btn2" type="button" v-on:click="search">搜索</button>
									</span></li>
									<li v-show="!role"><a href="login.html" class="w3_agile_facebook"><i class="fa fa-user-o" aria-hidden="true">登录</i></a></li>
									<li v-show="!role"><a href="register.html" class="agile_twitter"><i class="fa fa-sign-in" aria-hidden="true">注册</i></a></li>
									<li v-show="role"><a href="../admin/index.html" class="w3_agile_facebook"><i class="fa fa-user-o" aria-hidden="true">{{user.username}}</i></a></li>
									<li v-show="role"><a href="/workblog/user/logout" class="agile_twitter"><i class="fa fa-sign-in" aria-hidden="true">退出</i></a></li>
								</ul>
							</div>
					</div>
				</nav>
			</div>
			</nav>
		</div>

		<!-- //banner -->
		<!-- gallery -->
		<div class="zuida container-fluid">
			<div class="banxin row">
				<div class="gallerydetail fl ">
					<div class="gallerymsg1">
						<div class="author-name">
							<h3 class="widget-title1">
								<span>作者信息</span>
							</h3>
						</div>
						<div class="authormsg">

							<div class="authorarticle-image">
								<div class="authorarticle-image-nei" >
									<img :alt="author.username" :src="author.pic" class="img-circle">
								</div>
							</div>
							<div class="authorarticle-xinxi">
								<div class="xinxi-wai">
									<div class="author-xinxi">
										<p>用户名：{{author.username}}</p>
									</div>
									<div class="author-xinxi">
										<p>邮箱：{{author.email}}</p>
									</div>
									<div class="author-xinxi">
										<p>个性签名：{{author.autograph}}</p>
									</div>
								</div>
							</div>
						</div>

					</div>
				</div>
				<div class="fenglei fr col-lg-8 col-md-8">
					<div class="g1 row"  v-for="item in articlePage.list">
						<a :href="'article.html?articleid='+item.articleid">
							<div class="post fl col-md-6">
								<div class="post-title">{{item.title}}</div>
								<div class="post-info ">
									<small class="article-summary">{{item.summary}}</small> <br>
									<small>作者》{{item.authorname}} ,分类》{{item.categotyname}} </small>
								</div>
							</div>
							<div class="post-tupian fr col-md-6">
								<img class="img-responsive" :src="item.img">
							</div>
						</a>
					</div>
		
				</div>
			</div>
		</div>
	</div>
	<!-- //gallery -->
	<!-- footer -->
	<div class="copy-right-grids ">
		<div>
			<div class="copy-left">
				<p class="footer-gd">Copyright &copy; 2019.5 软件工程1601班 第二小组 李园祥
					周金勇 戴同吉 钟珊珊 刘华涛 王小杰 浅行博客 模板来自</p>
			</div>
			<div class="clearfix"></div>
		</div>
	</div>

	<!-- //bootstrap-pop-up -->
	<!-- flexSlider -->
	<script defer src="js/jquery.flexslider.js"></script>
	<script type="text/javascript">
		$(window).load(function() {
			$('.flexslider').flexslider({
				animation : "slide",
				start : function(slider) {
					$('body').removeClass('loading');
				}
			});
		});
	</script>
	<script src="../static/js/bootstrap.min.js"></script>
	<script type="text/javascript" src="js/move-top.js"></script>
	<script type="text/javascript" src="js/easing.js"></script>
	<script type="text/javascript">
		jQuery(document).ready(function($) {
			$(".scroll").click(function(event) {
				event.preventDefault();
				$('html,body').animate({
					scrollTop : $(this.hash).offset().top
				}, 1000);
			});
		});
	</script>
	<script type="text/javascript">
	var vm1 = new Vue({
		el: '#app',
		data: {
			username:'',
			role: '',
			user:{},
			author:{},
			articlePage:{}
		},
		created() {
			this.chooserole();
			this.getAuthor();
			this.getAll();
		},
		methods: {
			chooserole() {
				search(){
					var key=$.trim(document.getElementById("searchtext").value);
					if(key=="" || key.length>10){
						return false;
					}
					window.location.href="searchresult.html?key="+key;			
				},
				
				//判断用户的角色	
				this.$http.get('/workblog/user/getme').then(result => {
					var result = result.body;
					if(result.user !==null){
						this.user = result.user;
						this.role = true;	
					}
				});
			},
			getAuthor(){
				var id=this.getQueryString("authorid");
				//得到分类信息	
				this.$http.get('/workblog/user/get?id='+id).then(result => {
					var result = result.body;
					if(result.state===1){
						this.author=result.data;
					}
				});
			},
			getAll() {
				var id=this.getQueryString("authorid");
				//判断用户的角色	
				this.$http.get('/workblog/article/getpagebyauthor?index=1&length=10&authorid='+id).then(result => {
					var result = result.body;
					if(result.state===1){
						this.articlePage=result.data;
					}
					
				});
			},
			getRequest() {
				var url = location.search; //获取url中"?"符后的字串
				var theRequest = new Object();
				if (url.indexOf("?") != -1) {
					var strs = url.substr(1);
					this.id = strs.split("=")[1];
				}
				return theRequest;
			},
			getQueryString(name){
			     var reg = new RegExp("(^|&)"+ name +"=([^&]*)(&|$)");
			     var r = window.location.search.substr(1).match(reg);
			     if(r!=null)return  unescape(r[2]); return null;
			}
		}
	});
	
	</script>
</body>
</html>
